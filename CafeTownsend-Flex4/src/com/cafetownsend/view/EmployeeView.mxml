<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" xmlns:mx="library://ns.adobe.com/flex/mx" currentState="{model.currentState}">

	<fx:Script>
		<![CDATA[
			import com.cafetownsend.presentation.EmployeePresentationModel;
			
			[Bindable]
			[Inject]
			public var model:EmployeePresentationModel;
		]]>
	</fx:Script>

	<s:layout>
		<s:VerticalLayout />
	</s:layout>

	<s:states>
		<s:State name="default" />
		<s:State name="update" />
		<s:State name="add" />
	</s:states>

	<s:HGroup>
		<s:Button label="Add Employee" click="model.addEmployee()" />
	</s:HGroup>
	<s:HGroup width="100%" height="100%">
		<s:List width="200" dataProvider="{model.employees}"
				labelField="fullName" change="model.selectEmployee(event.newIndex)"
				selectedIndex="{model.selectedEmployeeIndex}" />

		<mx:Form excludeFrom="default">
			<mx:FormItem label="First Name" required="true">
				<s:TextInput id="firstName" text="{model.selectedEmployee.firstName}" />
			</mx:FormItem>
			<mx:FormItem label="Last Name" required="true">
				<s:TextInput id="lastName" text="{model.selectedEmployee.lastName}" />
			</mx:FormItem>
			<mx:FormItem label="Start Date">
				<mx:DateField id="startDate" selectedDate="{model.selectedEmployee.startDate}" />
			</mx:FormItem>
			<mx:FormItem label="Email" required="true">
				<s:TextInput id="email" text="{model.selectedEmployee.email}" />
			</mx:FormItem>
			<s:HGroup>
				<s:Button label.add="Submit" label.update="Update" click.add="model.createEmployee(firstName.text, lastName.text, startDate.selectedDate, email.text)" click.update="model.updateEmployee(firstName.text, lastName.text, startDate.selectedDate, email.text)" />
				<s:Button label="Delete" click="model.deleteEmployee()" />
			</s:HGroup>
		</mx:Form>
	</s:HGroup>

</s:Group>
